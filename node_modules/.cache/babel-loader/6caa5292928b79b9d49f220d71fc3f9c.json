{"remainingRequest":"F:\\桌面\\jingdong\\node_modules\\babel-loader\\lib\\index.js!F:\\桌面\\jingdong\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\桌面\\jingdong\\src\\effects\\cartEffects.js","dependencies":[{"path":"F:\\桌面\\jingdong\\src\\effects\\cartEffects.js","mtime":1621323726135},{"path":"F:\\桌面\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\桌面\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\桌面\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKLy8g5o6l5Y+j6L+U5Zue5pWw5o2u57uT5p6ECi8vIHsgICAgCi8vICAgICBzaG9wSWQ6eyAgICAgICAgICAgICAgICAgICAvL+WVhumTumlkCi8vICAgICAgIHNob3BuYW1lOiAn5rKD5bCU546bJywgICAgICAvL+WVhumTuuWQjeensAovLyAgICAgICBwcm9kdWN0TGlzdDp7ICAgICAgICAgICAvL+WVhuWTgeWIl+ihqAovLyAgICAgICAgIHByb2R1Y3RJZDp7ICAgICAgICAgICAvL+WVhuWTgWlkCi8vICAgICAgICAgICBfaWQ6ICIxIiwKLy8gICAgICAgICAgIGltZ1VybDogImh0dHA6Ly93d3cuZGVsbC1sZWUuY29tL2ltZ3MvdnVlMy90b21hdG8ucG5nIiwKLy8gICAgICAgICAgIG5hbWU6ICLnlarojIQgMjUwZyAvIOS7vSIsCi8vICAgICAgICAgICBvbGRQcmljZTogMzkuNiwgICAgICAvL+WVhuWTgeWOn+S7twovLyAgICAgICAgICAgcHJpY2U6IDMzLjYsICAgICAgICAgLy/llYblk4Hku7fmoLwKLy8gICAgICAgICAgIHNhbGVzOiAxMCwgICAgICAgICAgIC8v5ZWG5ZOB5pyI5ZSu5pWw6YePCi8vICAgICAgICAgICBjb3VudDogMiwgICAgICAgICAgICAvL+WVhuWTgeaVsOmHjwovLyAgICAgICAgICAgY2hlY2vvvJp0cnVlICAgICAgICAgIC8v6LSt54mp6L2m54q25oCBCi8vICAgICAgICAgfQovLyAgICAgICB9Ci8vICAgICB9Ci8vIH0KaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOyAvLyDotK3nianovabnm7jlhbPpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ29tbW9uQ2FydEVmZmVjdCA9IGZ1bmN0aW9uIHVzZUNvbW1vbkNhcnRFZmZlY3Qoc2hvcElkKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgY2FydExpc3QgPSBzdG9yZS5zdGF0ZS5jYXJ0TGlzdDsKCiAgdmFyIGNoYW5nZUNhcnRJdGVtSW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtSW5mbyhzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbUluZm8nLCB7CiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdEluZm86IHByb2R1Y3RJbmZvLAogICAgICBudW06IG51bQogICAgfSk7CiAgfTsgLy8g6I635Y+W5ZWG5ZOB5YiX6KGoCgoKICB2YXIgcHJvZHVjdExpc3QgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoKF9jYXJ0TGlzdCRzaG9wSWQgPSBjYXJ0TGlzdFtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3Qkc2hvcElkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkLnByb2R1Y3RMaXN0KSB8fCB7fTsKICAgIHZhciBub3RFbXB0eXByb2R1Y3RMaXN0ID0ge307CgogICAgZm9yICh2YXIgaSBpbiBwcm9kdWN0TGlzdCkgewogICAgICB2YXIgcHJvZHVjdCA9IHByb2R1Y3RMaXN0W2ldOwoKICAgICAgaWYgKHByb2R1Y3QuY291bnQgPiAwKSB7CiAgICAgICAgbm90RW1wdHlwcm9kdWN0TGlzdFtpXSA9IHByb2R1Y3Q7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbm90RW1wdHlwcm9kdWN0TGlzdDsKICB9KTsgLy8g6I635Y+W5ZWG6ZO65ZCN56ewCgogIHZhciBzaG9wTmFtZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfY2FydExpc3Qkc2hvcElkMjsKCiAgICB2YXIgc2hvcE5hbWUgPSAoKF9jYXJ0TGlzdCRzaG9wSWQyID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jYXJ0TGlzdCRzaG9wSWQyLnNob3BOYW1lKSB8fCAnJzsKICAgIHJldHVybiBzaG9wTmFtZTsKICB9KTsKICB2YXIgY2FsY3VsYXRpb25zID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQzOwoKICAgIHZhciBwcm9kdWN0TGlzdCA9IChfY2FydExpc3Qkc2hvcElkMyA9IGNhcnRMaXN0W3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkMy5wcm9kdWN0TGlzdDsKICAgIHZhciByZXN1bHQgPSB7CiAgICAgIHRvdGFsOiAwLAogICAgICAvL+WVhuWTgeaVsOmHjwogICAgICBwcmljZTogMCwKICAgICAgLy/llYblk4HmgLvph5Hpop0KICAgICAgYWxsQ2hlY2tlZDogdHJ1ZSAvL+WFqOmAieaMiemSruWIh+aNomljb27lm77moIcKCiAgICB9OwoKICAgIGlmIChwcm9kdWN0TGlzdCkgewogICAgICBmb3IgKHZhciBpIGluIHByb2R1Y3RMaXN0KSB7CiAgICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0TGlzdFtpXTsgLy8g6K6h566X5Yqg5YWl6LSt54mp6L2m55qE5ZWG5ZOB5pWw6YePCgogICAgICAgIHJlc3VsdC50b3RhbCArPSBwcm9kdWN0LmNvdW50OwoKICAgICAgICBpZiAocHJvZHVjdC5jaGVjaykgewogICAgICAgICAgLy8g6K6h566X5Yqg5YWl6LSt54mp6L2m5ZWG5ZOB5oC76YeR6aKdCiAgICAgICAgICByZXN1bHQucHJpY2UgKz0gcHJvZHVjdC5jb3VudCAqIHByb2R1Y3QucHJpY2U7CiAgICAgICAgfQoKICAgICAgICBpZiAocHJvZHVjdC5jb3VudCA+IDAgJiYgIXByb2R1Y3QuY2hlY2spIHsKICAgICAgICAgIC8vIOWFqOmAieaMiemSruWIh+aNomljb27lm77moIcKICAgICAgICAgIHJlc3VsdC5hbGxDaGVja2VkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9IC8vIOWKoOWFpei0reeJqei9puWVhuWTgeaAu+mHkemineS/neeVmeS4pOS9jeWwj+aVsAoKCiAgICByZXN1bHQucHJpY2UgPSByZXN1bHQucHJpY2UudG9GaXhlZCgyKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfSk7CiAgY29uc29sZS5sb2cocHJvZHVjdExpc3QsICdwcm9kdWN0TGlzdC0tLS0tLS0tJyk7CiAgcmV0dXJuIHsKICAgIGNhcnRMaXN0OiBjYXJ0TGlzdCwKICAgIHByb2R1Y3RMaXN0OiBwcm9kdWN0TGlzdCwKICAgIGNhbGN1bGF0aW9uczogY2FsY3VsYXRpb25zLAogICAgc2hvcE5hbWU6IHNob3BOYW1lLAogICAgY2hhbmdlQ2FydEl0ZW1JbmZvOiBjaGFuZ2VDYXJ0SXRlbUluZm8KICB9Owp9Ow=="},{"version":3,"sources":["F:/桌面/jingdong/src/effects/cartEffects.js"],"names":["computed","useStore","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","notEmptyproductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed","console","log"],"mappings":"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","sourcesContent":["    // 接口返回数据结构\r\n    // {    \r\n    //     shopId:{                   //商铺id\r\n    //       shopname: '沃尔玛',      //商铺名称\r\n    //       productList:{           //商品列表\r\n    //         productId:{           //商品id\r\n    //           _id: \"1\",\r\n    //           imgUrl: \"http://www.dell-lee.com/imgs/vue3/tomato.png\",\r\n    //           name: \"番茄 250g / 份\",\r\n    //           oldPrice: 39.6,      //商品原价\r\n    //           price: 33.6,         //商品价格\r\n    //           sales: 10,           //商品月售数量\r\n    //           count: 2,            //商品数量\r\n    //           check：true          //购物车状态\r\n    //         }\r\n    //       }\r\n    //     }\r\n    // }\r\nimport { computed } from 'vue';\r\nimport { useStore } from 'vuex';\r\n// 购物车相关逻辑\r\nexport const useCommonCartEffect = (shopId) => {\r\n    const store = useStore();\r\n    const cartList = store.state.cartList;\r\n    const changeCartItemInfo = ( shopId, productId, productInfo, num ) => {\r\n        store.commit('changeCartItemInfo', { shopId, productId, productInfo, num })\r\n    };\r\n    // 获取商品列表\r\n    const productList = computed(() => {\r\n        const productList = cartList[shopId]?.productList || {};\r\n        const notEmptyproductList = {};\r\n        for( let i in productList){\r\n            const product = productList[i]\r\n            if(product.count > 0){\r\n                notEmptyproductList[i] = product\r\n            }\r\n        }\r\n        return notEmptyproductList;\r\n    });\r\n    // 获取商铺名称\r\n    const shopName = computed(() => {\r\n        const shopName = cartList[shopId]?.shopName || '';\r\n        return shopName;\r\n    });\r\n    const calculations = computed(() => {\r\n        const productList = cartList[shopId]?.productList;\r\n        const result = { \r\n            total: 0,           //商品数量\r\n            price: 0,           //商品总金额\r\n            allChecked: true    //全选按钮切换icon图标\r\n        };\r\n        if(productList){\r\n            for(let i in productList){\r\n                const product = productList[i]\r\n                // 计算加入购物车的商品数量\r\n                result.total += product.count\r\n                if(product.check){\r\n                    // 计算加入购物车商品总金额\r\n                    result.price += ( product.count * product.price )\r\n                }\r\n                if(product.count>0 && !product.check){\r\n                    // 全选按钮切换icon图标\r\n                    result.allChecked = false\r\n                }\r\n            }\r\n        }\r\n        // 加入购物车商品总金额保留两位小数\r\n        result.price = result.price.toFixed(2);\r\n        return result;\r\n    });\r\n    console.log(productList,'productList--------')\r\n    return { cartList, productList, calculations, shopName, changeCartItemInfo };\r\n}\r\n"]}]}