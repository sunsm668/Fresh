{"remainingRequest":"F:\\桌面\\jingdong\\node_modules\\babel-loader\\lib\\index.js!F:\\桌面\\jingdong\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\桌面\\jingdong\\src\\effects\\cartEffects.js","dependencies":[{"path":"F:\\桌面\\jingdong\\src\\effects\\cartEffects.js","mtime":1621596156099},{"path":"F:\\桌面\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\桌面\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\桌面\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKLy8g5o6l5Y+j6L+U5Zue5pWw5o2u57uT5p6ECi8vIHsgICAgCi8vICAgICBzaG9wSWQ6eyAgICAgICAgICAgICAgICAgICAvL+WVhumTumlkCi8vICAgICAgIHNob3BuYW1lOiAn5rKD5bCU546bJywgICAgICAvL+WVhumTuuWQjeensAovLyAgICAgICBwcm9kdWN0TGlzdDp7ICAgICAgICAgICAvL+WVhuWTgeWIl+ihqAovLyAgICAgICAgIHByb2R1Y3RJZDp7ICAgICAgICAgICAvL+WVhuWTgWlkCi8vICAgICAgICAgICBfaWQ6ICIxIiwKLy8gICAgICAgICAgIGltZ1VybDogImh0dHA6Ly93d3cuZGVsbC1sZWUuY29tL2ltZ3MvdnVlMy90b21hdG8ucG5nIiwKLy8gICAgICAgICAgIG5hbWU6ICLnlarojIQgMjUwZyAvIOS7vSIsCi8vICAgICAgICAgICBvbGRQcmljZTogMzkuNiwgICAgICAvL+WVhuWTgeWOn+S7twovLyAgICAgICAgICAgcHJpY2U6IDMzLjYsICAgICAgICAgLy/llYblk4Hku7fmoLwKLy8gICAgICAgICAgIHNhbGVzOiAxMCwgICAgICAgICAgIC8v5ZWG5ZOB5pyI5ZSu5pWw6YePCi8vICAgICAgICAgICBjb3VudDogMiwgICAgICAgICAgICAvL+WVhuWTgeaVsOmHjwovLyAgICAgICAgICAgY2hlY2vvvJp0cnVlICAgICAgICAgIC8v6LSt54mp6L2m54q25oCBCi8vICAgICAgICAgfQovLyAgICAgICB9Ci8vICAgICB9Ci8vIH0KaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOyAvLyDotK3nianovabnm7jlhbPpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ29tbW9uQ2FydEVmZmVjdCA9IGZ1bmN0aW9uIHVzZUNvbW1vbkNhcnRFZmZlY3Qoc2hvcElkKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgY2FydExpc3QgPSBzdG9yZS5zdGF0ZS5jYXJ0TGlzdDsKICBjb25zb2xlLmxvZyhjYXJ0TGlzdCwgIi0tY2FydExpc3QiKTsKCiAgdmFyIGNoYW5nZUNhcnRJdGVtSW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtSW5mbyhzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbUluZm8nLCB7CiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdEluZm86IHByb2R1Y3RJbmZvLAogICAgICBudW06IG51bQogICAgfSk7CiAgfTsgLy8g6I635Y+W5ZWG5ZOB5YiX6KGoCgoKICB2YXIgcHJvZHVjdExpc3QgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoKF9jYXJ0TGlzdCRzaG9wSWQgPSBjYXJ0TGlzdFtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3Qkc2hvcElkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkLnByb2R1Y3RMaXN0KSB8fCB7fTsKICAgIGNvbnNvbGUubG9nKHByb2R1Y3RMaXN0LCAiLS0tLXByb2R1Y3RMaXN0Iik7CiAgICB2YXIgbm90RW1wdHlwcm9kdWN0TGlzdCA9IHt9OwoKICAgIGZvciAodmFyIGkgaW4gcHJvZHVjdExpc3QpIHsKICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0TGlzdFtpXTsKCiAgICAgIGlmIChwcm9kdWN0LmNvdW50ID4gMCkgewogICAgICAgIG5vdEVtcHR5cHJvZHVjdExpc3RbaV0gPSBwcm9kdWN0OwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG5vdEVtcHR5cHJvZHVjdExpc3Q7CiAgfSk7IC8vIOiOt+WPluWVhumTuuWQjeensAoKICB2YXIgc2hvcE5hbWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDI7CgogICAgdmFyIHNob3BOYW1lID0gKChfY2FydExpc3Qkc2hvcElkMiA9IGNhcnRMaXN0W3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkMi5wcm9kdWN0TGlzdC5zaG9wTmFtZSkgfHwgJyc7CiAgICBjb25zb2xlLmxvZyhzaG9wTmFtZSwgIi0tLS1zaG9wTmFtZSIpOwogICAgcmV0dXJuIHNob3BOYW1lOwogIH0pOwogIHZhciBjYWxjdWxhdGlvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDM7CgogICAgdmFyIHByb2R1Y3RMaXN0ID0gKF9jYXJ0TGlzdCRzaG9wSWQzID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jYXJ0TGlzdCRzaG9wSWQzLnByb2R1Y3RMaXN0OwogICAgdmFyIHJlc3VsdCA9IHsKICAgICAgdG90YWw6IDAsCiAgICAgIC8v5ZWG5ZOB5pWw6YePCiAgICAgIHByaWNlOiAwLAogICAgICAvL+WVhuWTgeaAu+mHkeminQogICAgICBhbGxDaGVja2VkOiB0cnVlIC8v5YWo6YCJ5oyJ6ZKu5YiH5o2iaWNvbuWbvuaghwoKICAgIH07CgogICAgaWYgKHByb2R1Y3RMaXN0KSB7CiAgICAgIGZvciAodmFyIGkgaW4gcHJvZHVjdExpc3QpIHsKICAgICAgICB2YXIgcHJvZHVjdCA9IHByb2R1Y3RMaXN0W2ldOyAvLyDorqHnrpfliqDlhaXotK3nianovabnmoTllYblk4HmlbDph48KCiAgICAgICAgcmVzdWx0LnRvdGFsICs9IHByb2R1Y3QuY291bnQ7CgogICAgICAgIGlmIChwcm9kdWN0LmNoZWNrKSB7CiAgICAgICAgICAvLyDorqHnrpfliqDlhaXotK3nianovabllYblk4HmgLvph5Hpop0KICAgICAgICAgIHJlc3VsdC5wcmljZSArPSBwcm9kdWN0LmNvdW50ICogcHJvZHVjdC5wcmljZTsKICAgICAgICB9CgogICAgICAgIGlmIChwcm9kdWN0LmNvdW50ID4gMCAmJiAhcHJvZHVjdC5jaGVjaykgewogICAgICAgICAgLy8g5YWo6YCJ5oyJ6ZKu5YiH5o2iaWNvbuWbvuaghwogICAgICAgICAgcmVzdWx0LmFsbENoZWNrZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8g5Yqg5YWl6LSt54mp6L2m5ZWG5ZOB5oC76YeR6aKd5L+d55WZ5Lik5L2N5bCP5pWwCgoKICAgIHJlc3VsdC5wcmljZSA9IHJlc3VsdC5wcmljZS50b0ZpeGVkKDIpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9KTsKICByZXR1cm4gewogICAgY2FydExpc3Q6IGNhcnRMaXN0LAogICAgcHJvZHVjdExpc3Q6IHByb2R1Y3RMaXN0LAogICAgY2FsY3VsYXRpb25zOiBjYWxjdWxhdGlvbnMsCiAgICBzaG9wTmFtZTogc2hvcE5hbWUsCiAgICBjaGFuZ2VDYXJ0SXRlbUluZm86IGNoYW5nZUNhcnRJdGVtSW5mbwogIH07Cn07"},{"version":3,"sources":["F:/桌面/jingdong/src/effects/cartEffects.js"],"names":["computed","useStore","useCommonCartEffect","shopId","store","cartList","state","console","log","changeCartItemInfo","productId","productInfo","num","commit","productList","notEmptyproductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed"],"mappings":"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","sourcesContent":["    // 接口返回数据结构\r\n    // {    \r\n    //     shopId:{                   //商铺id\r\n    //       shopname: '沃尔玛',      //商铺名称\r\n    //       productList:{           //商品列表\r\n    //         productId:{           //商品id\r\n    //           _id: \"1\",\r\n    //           imgUrl: \"http://www.dell-lee.com/imgs/vue3/tomato.png\",\r\n    //           name: \"番茄 250g / 份\",\r\n    //           oldPrice: 39.6,      //商品原价\r\n    //           price: 33.6,         //商品价格\r\n    //           sales: 10,           //商品月售数量\r\n    //           count: 2,            //商品数量\r\n    //           check：true          //购物车状态\r\n    //         }\r\n    //       }\r\n    //     }\r\n    // }\r\nimport { computed } from 'vue';\r\nimport { useStore } from 'vuex';\r\n// 购物车相关逻辑\r\nexport const useCommonCartEffect = (shopId) => {\r\n    const store = useStore();\r\n    const cartList = store.state.cartList;\r\n    console.log(cartList,\"--cartList\")\r\n    const changeCartItemInfo = ( shopId, productId, productInfo, num ) => {\r\n        store.commit('changeCartItemInfo', { shopId, productId, productInfo, num })\r\n    };\r\n    // 获取商品列表\r\n    const productList = computed(() => {\r\n        const productList = cartList[shopId]?.productList || {};\r\n        console.log(productList,\"----productList\")\r\n        const notEmptyproductList = {};\r\n        for( let i in productList){\r\n            const product = productList[i]\r\n            if(product.count > 0){\r\n                notEmptyproductList[i] = product\r\n            }\r\n        }\r\n        return notEmptyproductList;\r\n    });\r\n    // 获取商铺名称\r\n    const shopName = computed(() => {\r\n        const shopName = cartList[shopId]?.productList.shopName || '';\r\n        console.log(shopName,\"----shopName\")\r\n        return shopName;\r\n    });\r\n    const calculations = computed(() => {\r\n        const productList = cartList[shopId]?.productList;\r\n        const result = { \r\n            total: 0,           //商品数量\r\n            price: 0,           //商品总金额\r\n            allChecked: true    //全选按钮切换icon图标\r\n        };\r\n        if(productList){\r\n            for(let i in productList){\r\n                const product = productList[i]\r\n                // 计算加入购物车的商品数量\r\n                result.total += product.count\r\n                if(product.check){\r\n                    // 计算加入购物车商品总金额\r\n                    result.price += ( product.count * product.price )\r\n                }\r\n                if(product.count>0 && !product.check){\r\n                    // 全选按钮切换icon图标\r\n                    result.allChecked = false\r\n                }\r\n            }\r\n        }\r\n        // 加入购物车商品总金额保留两位小数\r\n        result.price = result.price.toFixed(2);\r\n        return result;\r\n    });\r\n    return { cartList, productList, calculations, shopName, changeCartItemInfo };\r\n}\r\n"]}]}